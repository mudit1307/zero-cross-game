<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zero Cross</title>
    <link rel="shortcut icon" href="./icons8-tic-tac-toe-40.png" type="image/x-icon">
    <!-- <link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet"> -->


</head>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300&family=Roboto:wght@300&display=swap');

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Poppins', sans-serif;
    }

    .wrapper {
        height: 100vh;
        display: flex;
        background: linear-gradient(purple, #6c5ce7);
        font-family: sans-serif;
        font-size: 16px;
    }

    .box-outer {
        width: auto;
        height: auto;
        margin: auto;
        text-align: center;
    }

    .head h2 {
        color: white;
        letter-spacing: 6px;
        font-size: 28px;
    }

    .dummy {
        display: flex;
        margin: 20px 0px 60px;

    }

    .display-output,
    .info {
        background-color: rgba(0, 0, 0, 0.15);
        border-radius: 5px;
        /* width: 100%; */
    }


    .display-output {
        background-color: rgba(0, 0, 0, 0.15);
        height: 40px;
        margin: auto;
        padding: 2px 10px;
        text-align: center;
        font-size: 30px;
        color: white;
        display: flex;
    }


    .display-output #move-turn {
        font-size: 22px;
        font-weight: 800;
        color: yellow;
        background-color: transparent;
        width: 150px;


        /* to remove input-box border highlight  */
        border: none;
        outline: none;
    }



    /* .board {
    width: 100%; 
    height: 350px;
    background-color: rgba(0, 0, 0, 0.15);
    padding: 25px 20px;
    display: flex;
}

.line
{
    height: 100px;
}

.one div,.two div
{
    border-right: 1px solid white;
    width: 130px;
    height: 100%;
} */

    .board {
        padding: 25px;
    }

    .one,
    .two,
    .three {
        height: 100px;
        display: flex;
        width: 100%;
    }

    .block {
        width: 100px;
        padding: 20px;
    }

    .block img {
        height: 60px;
        width: 60px;
    }
</style>


<body>
    <div class="wrapper">
        <div class="box-outer">
            <div class="head">
                <h2>ZERO-CROSS </h2>
            </div>

            <div class="dummy">
                <div class="display-output move">
                    <input readonly type="text" id="move-turn" >
                </div>
            </div>

            <div class="board info">
                <div class="line one">
                    <div class="block one-1"></div>
                    <hr>
                    <div class="block one-2"></div>
                    <hr>
                    <div class="block one-3"></div>
                </div>
                <hr>
                <div class="line two">
                    <div class="block two-1"></div>
                    <hr>
                    <div class="block two-2 "></div>
                    <hr>
                    <div class="block two-3 "></div>
                </div>
                <hr>
                <div class="line three">
                    <div class="block three-1 "></div>
                    <hr>
                    <div class="block three-2 "></div>
                    <hr>
                    <div class="block three-3 "></div>
                </div>

            </div>
        </div>
    </div>
</body>


<script>
    let move_turn = document.querySelector("#move-turn");
    let blocks = document.querySelectorAll(".block");
    // let blocks_images=document.querySelectorAll(".block img");

    // [zero-image , cross-image]
    let zcImages = ["icons8-o-67.png", "icons8-cross-100.png"];
    let move = 0;

    move_turn.value = "First Move - O";

    for (let i = 0; i < blocks.length; i++) {
        blocks[i].onclick = () => {
            // console.log("click " + i);

            let img_ele = document.createElement("img");
            img_ele.src = zcImages[(move % 2 == 0) ? 0 : 1];

            let ele = document.createElement("div");
            ele.appendChild(img_ele);

            blocks[i].appendChild(ele);

            disableBtn(i);
            
            
            if(move % 2 != 0)
            {
                move_turn.value = "O - Move";
            }
            else
            {
                move_turn.value = "X - Move";
            }

            
            let val = (move % 2 == 0) ? 0 : 1;
            checkWinning(i, val);
            move++;

        }
    }

    function disableBtn(i) {
        blocks[i].onclick = null;
    }

    let mask = [[-1, -1, -1], [-1, -1, -1], [-1, -1, -1]];


    function checkWinning(i, val) {

        console.log(Math.floor(i / 3), i % 3, val);

        mask[Math.floor(i / 3)][i % 3] = val;

        if (move > 3) {

            //search in row-col values
            let rowSum = null, colSum = null,diagonalSumOne=null,diagonalSumTwo=null;

            for (let x = 0; x < 3; x++) {

                console.log(rowSum, colSum);
                if (mask[Math.floor(i / 3)][x] != -1) { rowSum += mask[Math.floor(i / 3)][x] }
                else { rowSum = null; break; };
            }
            for (let x = 0; x < 3; x++) {
                console.log(rowSum, colSum);
                if (mask[x][i % 3] == -1) {
                    colSum = null; break;
                }
                colSum += mask[x][i % 3];
            }
            console.log(rowSum, colSum);

            //check diagonal sum
            let flagOne=1,flagTwo=1;
            for(let x=0;x<3;x++)
            {
                if(mask[x][x]!= -1)
                {diagonalSumOne+=mask[x][x];}
                else{
                    flagOne=0;
                    break;
                }
            }
            for(let x=0;x<3;x++)
            {
                if(mask[x][x]!= -1){
                    diagonalSumTwo+=mask[x][2-x];
                }
                else{
                    flagTwo=0;
                    break;
                }
            }
            console.log(diagonalSumOne);
            console.log(diagonalSumTwo);



            if (rowSum == 0 || colSum == 0 || ((diagonalSumOne==0 && flagOne) || (diagonalSumTwo==0 && flagTwo))) {
                disableRemainingBtn("O");
            }
            else if (rowSum == 3 || colSum == 3 || ((diagonalSumOne==3 && flagOne) || (diagonalSumTwo==0 && flagTwo))) {
                disableRemainingBtn("X");
            }

            rowSum = null, colSum = null; diagonalSumOne=null;diagonalSumTwo=null;
        }
    }

    function disableRemainingBtn(winner) {
        console.log("game disabled");

        move_turn.value = `Winner - ${winner}`;

        for (let x = 0; x < blocks.length; x++) {
            disableBtn(x);
        }
    }

</script>



</html>